!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jQuery"),require("React"),require("ReactDOM"));else if("function"==typeof define&&define.amd)define(["jQuery","React","ReactDOM"],e);else{var n="object"==typeof exports?e(require("jQuery"),require("React"),require("ReactDOM")):e(t.jQuery,t.React,t.ReactDOM);for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(t,e,n){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),r=n(5),s=n(1),a=n(3),c=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.componentDidMount=function(){var t=this;this.node=r.findDOMNode(this),this.networkNavigator=new a.NetworkNavigator(s(this.node)),this.networkNavigator.events.on("selectionChanged",function(e){t.props.onSelectionChanged&&t.props.onSelectionChanged(e)}),this.networkNavigator.dimensions={width:s(this.node).width(),height:s(this.node).height()},this.renderContent()},e.prototype.componentWillReceiveProps=function(t){this.renderContent(t)},e.prototype.render=function(){return o.createElement("div",{style:{width:"100%",height:"100%"}})},e.prototype.renderContent=function(t){t=t||this.props,this.selectionListener&&this.selectionListener.destroy(),this.networkNavigator.data=t.graph,t.config&&(this.networkNavigator.configuration=t.config),t.onSelectionChanged?this.selectionListener=this.networkNavigator.events.on("selectionChanged",function(e){return t.onSelectionChanged(e)}):this.selectionListener&&this.selectionListener.destroy()},e}(o.Component);e.NetworkNavigator=c},function(e,n){e.exports=t},function(t,e){"use strict";var n=function(){function t(){this.listeners={}}return t.prototype.on=function(t,e){var n=this,i=this.listeners[t]=this.listeners[t]||[];return i.push(e),{destroy:function(){n.off(t,e)}}},t.prototype.off=function(t,e){var n=this.listeners[t];if(n){var i=n.indexOf(e);i>=0&&n.splice(i,1)}},t.prototype.raiseEvent=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.listeners[t];o&&o.forEach(function(t){t.apply(e,n)})},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";var i=n(2),o=n(1),r=function(){function t(t,e,n){var r=this;e===void 0&&(e=500),n===void 0&&(n=500),this._configuration={animate:!0,linkDistance:10,linkStrength:2,charge:-120,gravity:.1,labels:!1,minZoom:.1,maxZoom:100,defaultLabelColor:"blue"},this.events=new i["default"],this.template='\n        <div class="graph-container">\n            <div class="button-bar">\n                <ul>\n                    <li class="filter-box" title="Filter Nodes">\n                        <input type="text" placeholder="Enter text filter" class="search-filter-box"/>\n                    </li>\n                    <li class="clear-selection" title="Clear filter and selection">\n                        <a>\n                            <span class="fa-stack">\n                                <i class="fa fa-check fa-stack-1x"></i>\n                                <i class="fa fa-ban fa-stack-2x"></i>\n                            </span>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div class="svg-container">\n            </div>\n        </div>\n    '.trim().replace(/\n/g,""),this.element=o(this.template),t.append(this.element),this.svgContainer=this.element.find(".svg-container");var s=this.element.find(".search-filter-box");this.element.find(".clear-selection").on("click",function(){s.val(""),r.filterNodes(s.val()),r.updateSelection(void 0)}),s.on("input",function(){r.filterNodes(s.val())}),this.dimensions={width:e,height:n},this.svg=d3.select(this.svgContainer[0]).append("svg").attr("width",e).attr("height",n),this.force=d3.layout.force().linkDistance(10).linkStrength(2).gravity(.1).charge(-120).size([e,n]),this.vis=this.svg.append("svg:g")}return Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._dimensions},set:function(t){this._dimensions={width:t.width||this.dimensions.width,height:t.height||this.dimensions.height},this.force&&(this.force.size([this.dimensions.width,this.dimensions.height]),this.force.resume(),this.element.css({width:this.dimensions.width,height:this.dimensions.height}),this.svgContainer.css({width:this.dimensions.width,height:this.dimensions.height}),this.svg.attr({width:this.dimensions.width,height:this.dimensions.height}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"configuration",{get:function(){return this._configuration},set:function(t){var e=this;if(t=o.extend(!0,{},this._configuration,t),this.force){var n,i=function(n,i){return t[n]!==e._configuration[n]?(e.force[n](t[n]||i),!0):void 0};n=n||i("linkDistance",10),n=n||i("linkStrength",2),n=n||i("charge",-120),n=n||i("gravity",.1),t.minZoom===this._configuration.minZoom&&t.maxZoom===this._configuration.maxZoom||this.zoom.scaleExtent([t.minZoom,t.maxZoom]),n&&this.configuration.animate?this.force.start():this.configuration.animate||this.force.stop(),t.labels!==this._configuration.labels&&this.vis.selectAll(".node text").style("opacity",t.labels?100:0)}this._configuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.getData()},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),t.prototype.redraw=function(){if(this.vis&&d3.event){var t=d3.event;this.vis.attr("transform","translate("+t.translate+") scale("+t.scale+")")}},t.prototype.getData=function(){return this.graph},t.prototype.setData=function(t){var e=this,n=this;this.graph=t,this.zoom=d3.behavior.zoom().scaleExtent([this._configuration.minZoom,this._configuration.maxZoom]).on("zoom",function(){return e.redraw()});var i=d3.behavior.drag().origin(function(t){return t}).on("dragstart",function(t){d3.event.sourceEvent.stopPropagation(),d3.select(this).classed("dragging",!0),n.force.start()}).on("drag",function(t){var e=d3.event;d3.select(this).attr("cx",t.x=e.x).attr("cy",t.y=e.y)}).on("dragend",function(t){d3.select(this).classed("dragging",!1)});this.svg.remove(),this.svg=d3.select(this.svgContainer[0]).append("svg").attr("width",this.dimensions.width).attr("height",this.dimensions.height).attr("preserveAspectRatio","xMidYMid meet").attr("pointer-events","all").call(this.zoom),this.vis=this.svg.append("svg:g");var o=t.nodes.slice(),r=[],s=[];t.links.forEach(function(t){var e=o[t.source],n=o[t.target],i=t.value,a={};o.push(a),r.push({source:e,target:a},{source:a,target:n}),s.push([e,a,n,i])}),this.force.nodes(o).links(r),this.configuration.animate&&this.force.start(),this.vis.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",0).attr("markerWidth",7).attr("markerHeight",7).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5");var a=this.vis.selectAll(".link").data(s).enter().append("line").attr("class","link").style("stroke","gray").style("stroke-width",function(t){var e=.15+t[3]/500;return e>3?3:e}).attr("id",function(t){return t[0].name.replace(/\./g,"_").replace(/@/g,"_")+"_"+t[2].name.replace(/\./g,"_").replace(/@/g,"_")}),c=this.vis.selectAll(".node").data(t.nodes).enter().append("g").call(i).attr("class","node");if(c.append("svg:circle").attr("r",function(t){return Math.log(100*(t.num||1))}).style("fill",function(t){return t.color}).style("stroke","red").style("stroke-width",function(t){return t.selected?1:0}).style("opacity",1),c.on("click",function(t){e.events.raiseEvent("nodeClicked",t),e.updateSelection(t)}),c.on("mouseover",function(){d3.select(e.svgContainer.find("svg text")[0]).style("opacity","100")}),c.on("mouseout",function(){e._configuration.labels||d3.select(e.svgContainer.find("svg text")[0]).style("opacity","0")}),a.append("svg:text").text(function(t){return"yes"}).attr("fill","black").attr("stroke","black").attr("font-size","5pt").attr("stroke-width","0.5px").attr("class","linklabel").attr("text-anchor","middle").style("opacity",function(){return 100}),a.on("click",function(t){console.log(t)}),c.append("svg:text").attr("class","node-label").text(function(t){return t.name}).attr("fill",function(t){return t.labelColor||e.configuration.defaultLabelColor}).attr("stroke",function(t){return t.labelColor||e.configuration.defaultLabelColor}).attr("font-size","5pt").attr("stroke-width","0.5px").style("opacity",this._configuration.labels?100:0),!this.configuration.animate){var l=0;for(this.force.start();this.force.alpha()>.01&&150>l;)this.force.tick(),l+=1;this.force.stop(),a.attr("x1",function(t){return t[0].x}).attr("y1",function(t){return t[0].y}).attr("x2",function(t){return t[2].x}).attr("y2",function(t){return t[2].y}),c.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}this.force.on("tick",function(){e.configuration.animate&&(a.attr("x1",function(t){return t[0].x}).attr("y1",function(t){return t[0].y}).attr("x2",function(t){return t[2].x}).attr("y2",function(t){return t[2].y}),c.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}))})},t.prototype.redrawSelection=function(){this.vis.selectAll(".node circle").style("stroke-width",function(t){return t.selected?1:0})},t.prototype.redrawLabels=function(){var t=this;this.vis.selectAll(".node .node-label").attr("fill",function(e){return e.labelColor||t.configuration.defaultLabelColor}).attr("stroke",function(e){return e.labelColor||t.configuration.defaultLabelColor})},t.prototype.filterNodes=function(t,e){e===void 0&&(e=!0);var n=this.vis.selectAll(".node circle");e&&(n=n.transition().duration(500).delay(100)),n.attr("transform",function(e){var n=1;return t&&e.name.indexOf(t)>=0&&(n=3),"scale("+n+")"})},t.prototype.updateSelection=function(t){t!==this._selectedNode?(this._selectedNode&&(this._selectedNode.selected=!1),t&&(t.selected=!0),this._selectedNode=t):(this._selectedNode&&(this._selectedNode.selected=!1),this._selectedNode=void 0),this.events.raiseEvent("selectionChanged",this._selectedNode),this.redrawSelection()},t}();e.NetworkNavigator=r},function(t,n){t.exports=e},function(t,e){t.exports=n}])});